<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<link rel="stylesheet" type="text/css" href="catalogo.css">

<body >

  <header>
    <div class="conteiner-icon">
      <ul class="nav-list">
        <li><img src="logo.png" class="nav-img" alt="Logo"></li>
        <li><a href="pg.htm" class="nav-item">Inicio</a></li>
        <li><a href="catalogo.html" class="nav-item">Catálogo</a></li>
        <li><a href="contactanos.html" class="nav-item">Contáctanos</a></li>
      </ul>
    </div>
   <div class="btn-float">
      <button onclick="abrirRegistro()">Registrarse</button>
      <button onclick="abrirLogin()">Iniciar sesión</button>
    </div>
 <div class="carrito-icono" onclick="mostrarCarrito()">🛒 <span id="contador-carrito">0</span></div>
  </header>

 

  <!-- Ventana carrito -->
  <div id="carrito" class="carrito">
    <h2>Carrito de compras</h2>
    <ul id="lista-carrito"></ul>
    <p id="total-carrito">Total: $0.00</p>
    <button onclick="cerrarCarrito()">Cerrar</button>
  </div>

  <main>
    <h1>Catálogo</h1>
    <center>
    <input type="text" id="buscador" placeholder="Buscar...">

    <!-- Resultados búsqueda -->
    <div id="contenedor-resultados" style="display: none;">
      <h2>Resultados de búsqueda</h2>
      <div id="resultados" class="conteiner-items"></div>
    </div>

    <!-- Lista productos -->
    <div class="conteiner-items">

      <!-- Producto 1 -->
      <div class="item">
        <figure><img src="producto1.jpg" alt="Lagartija Azul"></figure>
        <div class="info-product">
          <h2>Lagartija Azul</h2>
          <h3>$150.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto1.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Lagartija Azul', 150)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 2 -->
      <div class="item">
        <figure><img src="producto2.jpg" alt="Nutria"></figure>
        <div class="info-product">
          <h2>Nutria</h2>
          <h3>$80.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto2.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Nutria', 80)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 3 -->
      <div class="item">
        <figure><img src="producto3.jpg" alt="Pingüino"></figure>
        <div class="info-product">
          <h2>Pingüino</h2>
          <h3>$200.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto3.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Pingüino', 200)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 4 -->
      <div class="item">
        <figure><img src="producto4.jpg" alt="Oso Navideño"></figure>
        <div class="info-product">
          <h2>Oso Navideño</h2>
          <h3>$120.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto4.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Oso Navideño', 120)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 5 -->
      <div class="item">
        <figure><img src="producto5.jpg" alt="Chancho"></figure>
        <div class="info-product">
          <h2>Chancho</h2>
          <h3>$250.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto5.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Chancho', 250)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 6 -->
      <div class="item">
        <figure><img src="producto6.jpg" alt="Elefante"></figure>
        <div class="info-product">
          <h2>Elefante</h2>
          <h3>$150.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto6.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Elefante', 150)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 7 -->
      <div class="item">
        <figure><img src="producto7.jpg" alt="Raton"></figure>
        <div class="info-product">
          <h2>Raton</h2>
          <h3>$50.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto7.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Raton', 50)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 8 -->
      <div class="item">
        <figure><img src="producto8.jpg" alt="Doraemon"></figure>
        <div class="info-product">
          <h2>Doraemon</h2>
          <h3>$250.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto8.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Doraemon', 250)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 9 -->
      <div class="item">
        <figure><img src="producto9.jpg" alt="Tortuga"></figure>
        <div class="info-product">
          <h2>Tortuga</h2>
          <h3>$120.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto9.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Tortuga', 120)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 10 -->
      <div class="item">
        <figure><img src="producto10.jpg" alt="Conejito"></figure>
        <div class="info-product">
          <h2>Conejito</h2>
          <h3>$50.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto10.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Conejito', 50)">Agregar al carrito</button>
          </div>
        </div>
      </div>

       <!-- Producto 11 -->
      <div class="item">
        <figure><img src="producto11.jpg" alt="Oso rosa"></figure>
        <div class="info-product">
          <h2>Oso rosa</h2>
          <h3>$150.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto11.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Oso rosa', 150)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 12 -->
      <div class="item">
        <figure><img src="producto12.jpg" alt="Kirby"></figure>
        <div class="info-product">
          <h2>Kirby</h2>
          <h3>$250.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto12.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Kirby', 250)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 13 -->
      <div class="item">
        <figure><img src="producto13.jpg" alt="Cerdo minecraft"></figure>
        <div class="info-product">
          <h2>Cerdo minecraft</h2>
          <h3>$400.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto13.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Cerdo minecraft', 400)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 14 -->
      <div class="item">
        <figure><img src="producto14.jpg" alt="Vaca"></figure>
        <div class="info-product">
          <h2>Vaca</h2>
          <h3>$200.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto14.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Vaca', 200)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      <!-- Producto 15 -->
      <div class="item">
        <figure><img src="producto15.jpg" alt="Chococat"></figure>
        <div class="info-product">
          <h2>Chococat</h2>
          <h3>$500.00</h3>
          <div class="botones-producto">
            <button onclick="location.href='producto15.html'">Ver más</button>
            <button onclick="agregarAlCarrito('Chococat', 500)">Agregar al carrito</button>
          </div>
        </div>
      </div>

      

    </div>
    </center>
  </main>
<!-- Panel flotante de registro -->
<div id="panelRegistro" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;">
  <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; position: relative;">
    <button onclick="cerrarRegistro()" style="position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">X</button>
    <h2>Formulario de Registro</h2>
    <form id="formRegistro">
      <label>Nombre:</label><br>
      <input type="text" id="nombre" required style="width: 100%; padding: 8px;"><br><br>

      <label>Email:</label><br>
      <input type="email" id="email" required style="width: 100%; padding: 8px;"><br><br>

      <label>Contraseña:</label><br>
      <input type="password" id="password" required style="width: 100%; padding: 8px;"><br><br>

      <button type="submit" style="padding: 10px 20px; background-color: black; color: white; border: none;">Registrarse</button>
    </form>
    <p id="mensajeRegistro" style="margin-top: 10px;"></p>
  </div>
</div>
<!-- Panel flotante de inicio de sesión -->
<div id="panelLogin" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;">
  <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; position: relative;">
    <button onclick="cerrarLogin()" style="position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">X</button>
    <h2>Iniciar Sesión</h2>
    <form id="formLogin">
      <label>Email:</label><br>
      <input type="email" id="loginEmail" required style="width: 100%; padding: 8px;"><br><br>

      <label>Contraseña:</label><br>
      <input type="password" id="loginPassword" required style="width: 100%; padding: 8px;"><br><br>

      <button type="submit" style="padding: 10px 20px; background-color: black; color: white; border: none;">Ingresar</button>
    </form>
    <p id="mensajeLogin" style="margin-top: 10px;"></p>
  </div>
</div>

<div id="saludoContainer" style="position: fixed; top: 20px; right: 100px; display: flex; gap: 10px; align-items: center;">
  <p id="saludoUsuario" style="background-color: #eee; padding: 10px; border-radius: 8px; margin: 0;"></p>
  <button id="btnCerrarSesion" onclick="cerrarSesion()" style="background-color: red; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">Cerrar sesión</button>
</div>


<script>
  const productos = [
      { nombre: "Lagartija Azul", precio: "$150.00", enlace: "producto1.html", imagen: "producto1.jpg" },
      { nombre: "Nutria", precio: "$80.00", enlace: "producto2.html", imagen: "producto2.jpg" },
      { nombre: "Pingüino", precio: "$200.00", enlace: "producto3.html", imagen: "producto3.jpg" },
      { nombre: "Oso Navideño", precio: "$120.00", enlace: "producto4.html", imagen: "producto4.jpg" },
      { nombre: "Chancho", precio: "$250.00", enlace: "producto5.html", imagen: "producto5.jpg" },
      { nombre: "Elefante", precio: "$150.00", enlace: "producto6.html", imagen: "producto6.jpg" },
      { nombre: "Raton", precio: "$50.00", enlace: "producto7.html", imagen: "producto7.jpg" },
      { nombre: "Doraemon", precio: "$250.00", enlace: "producto8.html", imagen: "producto8.jpg" },
      { nombre: "Tortuga", precio: "$120.00", enlace: "producto9.html", imagen: "producto9.jpg" },
      {nombre: "Conejito", precio: "$50.00", enlace: "producto10.html", imagen: "producto10.jpg" },
      { nombre: "Oso rosa", precio: "$150.00", enlace: "producto11.html", imagen: "producto11.jpg" },
      { nombre: "Kirby", precio: "$250.00", enlace: "producto12.html", imagen: "producto12.jpg" },
      { nombre: "Cerdo minecraft", precio: "$400.00", enlace: "producto13.html", imagen: "producto13.jpg" },
      { nombre: "Vaca", precio: "$200.00", enlace: "producto14.html", imagen: "producto14.jpg" },
      { nombre: "Chococat", precio: "$500.00", enlace: "producto15.html", imagen: "producto15.jpg" },
      { nombre: "Totoro", precio: "$500.00", enlace: "producto16.html", imagen: "producto16.jpg" },
      { nombre: "Rata", precio: "$100.00", enlace: "producto17.html", imagen: "producto17.jpg" },
      { nombre: "Rana", precio: "$280.00", enlace: "producto18.html", imagen: "producto18.jpg" },
      { nombre: "rilakkuma", precio: "$220.00", enlace: "producto19.html", imagen: "producto19.jpg" },
      { nombre: "Parejita de osos", precio: "$100.00", enlace: "producto20.html", imagen: "producto20.jpg" },
    ];

    const buscador = document.getElementById("buscador");
    const resultados = document.getElementById("resultados");
    const contenedorResultados = document.getElementById("contenedor-resultados");

    buscador.addEventListener("input", () => {
      const textoBusqueda = buscador.value.toLowerCase().trim();

      if (textoBusqueda === "") {
        resultados.innerHTML = "";
        contenedorResultados.style.display = "none";
        return;
      }

      const resultadosBusqueda = productos.filter(producto =>
        producto.nombre.toLowerCase().includes(textoBusqueda)
      );

      resultados.innerHTML = "";

      if (resultadosBusqueda.length > 0) {
        contenedorResultados.style.display = "block";

        resultadosBusqueda.forEach((resultado) => {
          const elemento = document.createElement("div");
          elemento.classList.add("item");

          elemento.innerHTML = `
            <figure>
              <img src="${resultado.imagen}" alt="${resultado.nombre}">
            </figure>
            <div class="info-product">
              <h2>${resultado.nombre}</h2>
              <h3 class="price">${resultado.precio}</h3>
              <button onclick="location.href='${resultado.enlace}'">Ver más</button>
            </div>
          `;

          resultados.appendChild(elemento);
        });
      } else {
        contenedorResultados.style.display = "block";
        resultados.innerHTML = "<p>No se encontraron resultados.</p>";
      }
    });
  // Carrito almacenado localmente
  let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

  function actualizarCarrito() {
    const contador = document.getElementById('contador-carrito');
    const lista = document.getElementById('lista-carrito');
    const totalCarrito = document.getElementById('total-carrito');

    let totalCantidad = carrito.reduce((acc, prod) => acc + prod.cantidad, 0);
    contador.textContent = totalCantidad;

    lista.innerHTML = '';
    let total = 0;
    carrito.forEach((producto, index) => {
      const li = document.createElement('li');
      li.textContent = `${producto.nombre} x${producto.cantidad} - $${(producto.precio * producto.cantidad).toFixed(2)}`;

      const btnEliminar = document.createElement('button');
      btnEliminar.textContent = 'X';
      btnEliminar.onclick = () => {
        carrito.splice(index, 1);
        guardarCarrito();
        actualizarCarrito();
      };

      li.appendChild(btnEliminar);
      lista.appendChild(li);
      total += producto.precio * producto.cantidad;
    });

    totalCarrito.textContent = `Total: $${total.toFixed(2)}`;
  }

  function guardarCarrito() {
    localStorage.setItem('carrito', JSON.stringify(carrito));
  }

  function agregarAlCarrito(nombre, precio) {
    const productoExistente = carrito.find(p => p.nombre === nombre);
    if (productoExistente) {
      productoExistente.cantidad++;
    } else {
      carrito.push({ nombre, precio, cantidad: 1 });
    }
    guardarCarrito();
    actualizarCarrito();
  }

  function mostrarCarrito() {
    document.getElementById('carrito').style.display = 'block';
  }

  function cerrarCarrito() {
    document.getElementById('carrito').style.display = 'none';
  }

  actualizarCarrito();

  // Registro
  function abrirRegistro() {
    document.getElementById('panelRegistro').style.display = 'flex';
  }

  function cerrarRegistro() {
    document.getElementById('panelRegistro').style.display = 'none';
  }

  // Login
  function abrirLogin() {
    document.getElementById('panelLogin').style.display = 'flex';
  }

  function cerrarLogin() {
    document.getElementById('panelLogin').style.display = 'none';
  }

  // Registro
  const formRegistro = document.getElementById('formRegistro');
  formRegistro.onsubmit = function (e) {
    e.preventDefault();
    const nombre = document.getElementById('nombre').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    localStorage.setItem('usuario', JSON.stringify({ nombre, email, password }));
    document.getElementById('mensajeRegistro').textContent = "Registro exitoso.";
    formRegistro.reset();
  };

  // Login
  const formLogin = document.getElementById('formLogin');
  formLogin.onsubmit = function (e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    const usuario = JSON.parse(localStorage.getItem('usuario'));

    if (usuario && usuario.email === email && usuario.password === password) {
      localStorage.setItem('logueado', 'true');
      document.getElementById('panelLogin').style.display = 'none';
      document.getElementById('mensajeLogin').textContent = '';

      // Mostrar saludo y botón cerrar sesión
      document.getElementById('saludoUsuario').textContent = `Hola, ${usuario.nombre}`;
      document.getElementById('saludoContainer').style.display = 'flex';

      // Ocultar botones de inicio de sesión y registro
      document.querySelector('button[onclick="abrirRegistro()"]').style.display = 'none';
      document.querySelector('button[onclick="abrirLogin()"]').style.display = 'none';

    } else {
      document.getElementById('mensajeLogin').textContent = 'Correo o contraseña incorrectos.';
    }
  };

  function cerrarSesion() {
    localStorage.removeItem('logueado');
    document.getElementById('saludoUsuario').textContent = '';
    document.getElementById('saludoContainer').style.display = 'none';

    // Mostrar botones de inicio de sesión y registro
    document.querySelector('button[onclick="abrirRegistro()"]').style.display = 'inline-block';
    document.querySelector('button[onclick="abrirLogin()"]').style.display = 'inline-block';
  }

  // Al cargar la página
  window.onload = function () {
    const logueado = localStorage.getItem('logueado') === 'true';
    const usuario = JSON.parse(localStorage.getItem('usuario'));

    if (logueado && usuario) {
      document.getElementById('saludoUsuario').textContent = `Hola, ${usuario.nombre}`;
      document.getElementById('saludoContainer').style.display = 'flex';

      // Ocultar botones
      document.querySelector('button[onclick="abrirRegistro()"]').style.display = 'none';
      document.querySelector('button[onclick="abrirLogin()"]').style.display = 'none';
    } else {
      document.getElementById('saludoContainer').style.display = 'none';
    }
  };

</script>

</body>
</html>