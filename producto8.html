<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="productos.css">
</head>
<body>
 <header>
    <div class="conteiner-icon">
      <ul class="nav-list">
        <li><img src="logo.png" class="nav-img" alt="Logo"></li>
        <li><a href="pg.htm" class="nav-item">Inicio</a></li>
        <li><a href="catalogo.html" class="nav-item">Cat√°logo</a></li>
        <li><a href="contactanos.html" class="nav-item">Cont√°ctanos</a></li>
      </ul>
    </div>
   <div class="btn-float">
      <button onclick="abrirRegistro()">Registrarse</button>
      <button onclick="abrirLogin()">Iniciar sesi√≥n</button>
    </div>
 <div class="carrito-icono" onclick="mostrarCarrito()">üõí <span id="contador-carrito">0</span></div>
  </header>
<div id="panelRegistro" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;">
  <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; position: relative;">
    <button onclick="cerrarRegistro()" style="position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">X</button>
    <h2>Formulario de Registro</h2>
    <form id="formRegistro">
      <label>Nombre:</label><br>
      <input type="text" id="nombre" required style="width: 100%; padding: 8px;"><br><br>

      <label>Email:</label><br>
      <input type="email" id="email" required style="width: 100%; padding: 8px;"><br><br>

      <label>Contrase√±a:</label><br>
      <input type="password" id="password" required style="width: 100%; padding: 8px;"><br><br>

      <button type="submit" style="padding: 10px 20px; background-color: black; color: white; border: none;">Registrarse</button>
    </form>
    <p id="mensajeRegistro" style="margin-top: 10px;"></p>
  </div>
</div>
<!-- Panel flotante de inicio de sesi√≥n -->
<div id="panelLogin" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;">
  <div style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 400px; position: relative;">
    <button onclick="cerrarLogin()" style="position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">X</button>
    <h2>Iniciar Sesi√≥n</h2>
    <form id="formLogin">
      <label>Email:</label><br>
      <input type="email" id="loginEmail" required style="width: 100%; padding: 8px;"><br><br>

      <label>Contrase√±a:</label><br>
      <input type="password" id="loginPassword" required style="width: 100%; padding: 8px;"><br><br>

      <button type="submit" style="padding: 10px 20px; background-color: black; color: white; border: none;">Ingresar</button>
    </form>
    <p id="mensajeLogin" style="margin-top: 10px;"></p>
  </div>
</div>

<div id="saludoContainer" style="position: fixed; top: 20px; right: 100px; display: flex; gap: 10px; align-items: center;">
  <p id="saludoUsuario" style="background-color: #eee; padding: 10px; border-radius: 8px; margin: 0;"></p>
  <button id="btnCerrarSesion" onclick="cerrarSesion()" style="background-color: red; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">Cerrar sesi√≥n</button>
</div>
  <!-- Ventana carrito -->
  <div id="carrito" class="carrito">
    <h2>Carrito de compras</h2>
    <ul id="lista-carrito"></ul>
    <p id="total-carrito">Total: $0.00</p>
    <button onclick="cerrarCarrito()">Cerrar</button>
  </div>
  <main>

  <div class="container-img"> 
    <img src="producto8.jpg">
  </div>

  <div class="container-info-product">
    <div class="container-price">
    <h1>Lagartija Azul</h1>
    <span> $150.00</span> 
    </div>
    <div class="container-descripcion ">
      <div class="title-descripcion">
        <h2>Descripcion</h2>
        </div>
        <div class="container-details-product"> 
      <div class="text-descripcion">
        <p>Este adorable peluche de lagartija azul es un compa√±ero perfecto para cualquier <br>persona que ame los reptiles. <br><br>Con una altura de 50 cent√≠metros y un ancho de 30 cent√≠metros, este peluche es lo <br>suficientemente grande como para ser un compa√±ero de juego, pero lo suficientemente <br>peque√±o como para ser f√°cil de llevar en brazos.<br><br> Su cuerpo est√° hecho de un suave material de peluche que es agradable al tacto, y su<br> color azul brillante es seguro de llamar la atenci√≥n.<br>
                <br>
        Este peluche es ideal para ni√±os y adultos por igual, y es un regalo perfecto para <br>cualquier persona que ame los animales.<br> <br>Ya sea que lo uses como un compa√±ero de juego, un decorativo para tu habitaci√≥n o <br>un regalo para un ser querido, este peluche de lagartija azul es seguro de¬†ser¬†un¬†√©xito. </p>
        <br>
      </div>
      <br><br>
    <div class="container-add-cart">
      <div class="container-quantity">
        <input type="number" placeholder="1" value="1" min="1" class="input-quantity">
              <center>
 <br><button id="abrir-panel" class="btn-add-to-cart" >Comprar</button><br>
<!-- Bot√≥n para agregar al carrito -->
<button onclick="agregarAlCarrito('Lagartija Azul', 150)" class="ag_cart">Agregar al carrito</button>

<div id="panel">
  <button id="cerrar-panel" aria-label="Cerrar panel">‚úñ</button>
  <form id="formulario">
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="apellido">Apellido:</label>
    <input type="text" id="apellido" name="apellido" required>

    <label for="email">Correo electr√≥nico:</label>
    <input type="email" id="email" name="email" required>

    <label for="telefono">Tel√©fono:</label>
    <input type="tel" id="telefono" name="telefono" required>

    <label for="direccion">Direcci√≥n:</label>
    <input type="text" id="direccion" name="direccion" required>

    <label for="ciudad">Ciudad:</label>
    <input type="text" id="ciudad" name="ciudad" required>

    <label for="pais">Pa√≠s:</label>
    <select id="pais" name="pais" required>
      <option value="">Seleccione un pa√≠s</option>
      <option value="M√©xico">M√©xico</option>
      <option value="Estados Unidos">Estados Unidos</option>
      <option value="Canad√°">Canad√°</option>
    </select>

    <label for="tarjeta">N√∫mero de tarjeta:</label>
    <input type="text" id="tarjeta" name="tarjeta" required>

    <label for="fechaVencimiento">Fecha de vencimiento:</label>
    <input type="date" id="fechaVencimiento" name="fechaVencimiento" required>

    <label for="cvv">CVV:</label>
    <input type="text" id="cvv" name="cvv" required>

    <button id="enviar" type="submit">Enviar</button>
  </form>
</div>
</div>
<script type="text/javascript">
  let carrito = JSON.parse(localStorage.getItem('carrito')) || [];

  function actualizarCarrito() {
    const contador = document.getElementById('contador-carrito');
    const lista = document.getElementById('lista-carrito');
    const totalCarrito = document.getElementById('total-carrito');

    let totalCantidad = carrito.reduce((acc, prod) => acc + prod.cantidad, 0);
    contador.textContent = totalCantidad;

    lista.innerHTML = '';
    let total = 0;
    carrito.forEach((producto, index) => {
      const li = document.createElement('li');
      li.textContent = `${producto.nombre} x${producto.cantidad} - $${(producto.precio * producto.cantidad).toFixed(2)}`;

      const btnEliminar = document.createElement('button');
      btnEliminar.textContent = 'X';
      btnEliminar.onclick = () => {
        carrito.splice(index, 1);
        guardarCarrito();
        actualizarCarrito();
      };

      li.appendChild(btnEliminar);
      lista.appendChild(li);
      total += producto.precio * producto.cantidad;
    });

    totalCarrito.textContent = `Total: $${total.toFixed(2)}`;
  }

  function guardarCarrito() {
    localStorage.setItem('carrito', JSON.stringify(carrito));
  }

  function agregarAlCarrito(nombre, precio) {
    const productoExistente = carrito.find(p => p.nombre === nombre);
    if (productoExistente) {
      productoExistente.cantidad++;
    } else {
      carrito.push({ nombre, precio, cantidad: 1 });
    }
    guardarCarrito();
    actualizarCarrito();
  }

  function mostrarCarrito() {
    document.getElementById('carrito').style.display = 'block';
  }

  function cerrarCarrito() {
    document.getElementById('carrito').style.display = 'none';
  }

  actualizarCarrito();

  // Registro
  function abrirRegistro() {
    document.getElementById('panelRegistro').style.display = 'flex';
  }

  function cerrarRegistro() {
    document.getElementById('panelRegistro').style.display = 'none';
  }

  // Login
  function abrirLogin() {
    document.getElementById('panelLogin').style.display = 'flex';
  }

  function cerrarLogin() {
    document.getElementById('panelLogin').style.display = 'none';
  }

  // Registro
  const formRegistro = document.getElementById('formRegistro');
  formRegistro.onsubmit = function (e) {
    e.preventDefault();
    const nombre = document.getElementById('nombre').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    localStorage.setItem('usuario', JSON.stringify({ nombre, email, password }));
    document.getElementById('mensajeRegistro').textContent = "Registro exitoso.";
    formRegistro.reset();
  };

  // Login
  const formLogin = document.getElementById('formLogin');
  formLogin.onsubmit = function (e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    const usuario = JSON.parse(localStorage.getItem('usuario'));

    if (usuario && usuario.email === email && usuario.password === password) {
      localStorage.setItem('logueado', 'true');
      document.getElementById('panelLogin').style.display = 'none';
      document.getElementById('mensajeLogin').textContent = '';

      // Mostrar saludo y bot√≥n cerrar sesi√≥n
      document.getElementById('saludoUsuario').textContent = `Hola, ${usuario.nombre}`;
      document.getElementById('saludoContainer').style.display = 'flex';

      // Ocultar botones de inicio de sesi√≥n y registro
      document.querySelector('button[onclick="abrirRegistro()"]').style.display = 'none';
      document.querySelector('button[onclick="abrirLogin()"]').style.display = 'none';

    } else {
      document.getElementById('mensajeLogin').textContent = 'Correo o contrase√±a incorrectos.';
    }
  };

  function cerrarSesion() {
    localStorage.removeItem('logueado');
    document.getElementById('saludoUsuario').textContent = '';
    document.getElementById('saludoContainer').style.display = 'none';

    // Mostrar botones de inicio de sesi√≥n y registro
    document.querySelector('button[onclick="abrirRegistro()"]').style.display = 'inline-block';
    document.querySelector('button[onclick="abrirLogin()"]').style.display = 'inline-block';
  }

  // Al cargar la p√°gina
  window.onload = function () {
    const logueado = localStorage.getItem('logueado') === 'true';
    const usuario = JSON.parse(localStorage.getItem('usuario'));

    if (logueado && usuario) {
      document.getElementById('saludoUsuario').textContent = `Hola, ${usuario.nombre}`;
      document.getElementById('saludoContainer').style.display = 'flex';

      // Ocultar botones
      document.querySelector('button[onclick="abrirRegistro()"]').style.display = 'none';
      document.querySelector('button[onclick="abrirLogin()"]').style.display = 'none';
    } else {
      document.getElementById('saludoContainer').style.display = 'none';
    }
  };
  // Mostrar panel al hacer clic en bot√≥n "Comprar"
  document.getElementById("abrir-panel").addEventListener("click", function() {
    document.getElementById("panel").style.display = "block";
  });

  // Cerrar panel al hacer clic en la X
  document.getElementById("cerrar-panel").addEventListener("click", function() {
    document.getElementById("panel").style.display = "none";
  });

  // Manejo del env√≠o del formulario
  document.getElementById("formulario").addEventListener("submit", function(e) {
    e.preventDefault();
    alert("Compra enviada correctamente.");
    document.getElementById("panel").style.display = "none";
    this.reset();
  });
</script>

      </div>
     </div>
    </div>
  </div>
  </div>
</main>
</body>
</html>